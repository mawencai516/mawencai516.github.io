[{"title":"移动端适配","url":"http://yoursite.com/2020/05/27/移动端适配/","content":"<h2 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h2><h3 id=\"1、安装\"><a href=\"#1、安装\" class=\"headerlink\" title=\"1、安装\"></a>1、安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lib-flexible --save</span><br><span class=\"line\">npm install px2rem-loader --save</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、引入lib-flexible\"><a href=\"#2、引入lib-flexible\" class=\"headerlink\" title=\"2、引入lib-flexible\"></a>2、引入lib-flexible</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main.js 文件</span><br><span class=\"line\">import <span class=\"string\">'lib-flexible'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3、public-index-html头里的meta标签\"><a href=\"#3、public-index-html头里的meta标签\" class=\"headerlink\" title=\"3、public/index.html头里的meta标签\"></a>3、public/index.html头里的meta标签</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width,initial-scale=1.0\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、vue-config-js中配置css-loaderOptions\"><a href=\"#4、vue-config-js中配置css-loaderOptions\" class=\"headerlink\" title=\"4、vue.config.js中配置css.loaderOptions\"></a>4、vue.config.js中配置css.loaderOptions</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\"> css: &#123;</span><br><span class=\"line\">    loaderOptions: &#123;</span><br><span class=\"line\">        postcss: &#123;</span><br><span class=\"line\">            plugins: [</span><br><span class=\"line\">                require(<span class=\"string\">'postcss-plugin-px2rem'</span>)(&#123;</span><br><span class=\"line\">                    rootValue: 75, //换算基数， 默认100</span><br><span class=\"line\">                    // unitPrecision: 5, //允许REM单位增长到的十进制数字。</span><br><span class=\"line\">                    //propWhiteList: [],  //默认值是一个空数组，这意味着禁用白名单并启用所有属性。</span><br><span class=\"line\">                    // propBlackList: [], //黑名单</span><br><span class=\"line\">                    exclude: /(node_module)/,  //默认<span class=\"literal\">false</span>，可以（reg）利用正则表达式排除某些文件夹的方法，例如/(node_module)/ 。如果想把前端UI框架内的px也转换成rem，请把此属性设为默认值</span><br><span class=\"line\">                    // selectorBlackList: [], //要忽略并保留为px的选择器</span><br><span class=\"line\">                    // ignoreIdentifier: <span class=\"literal\">false</span>,  //（boolean/string）忽略单个属性的方法，启用ignoreidentifier后，replace将自动设置为<span class=\"literal\">true</span>。</span><br><span class=\"line\">                    // replace: <span class=\"literal\">true</span>, // （布尔值）替换包含REM的规则，而不是添加回退。</span><br><span class=\"line\">                    mediaQuery: <span class=\"literal\">false</span>,  //（布尔值）允许在媒体查询中转换px。</span><br><span class=\"line\">                    minPixelValue: 3 //设置要替换的最小像素值(3px会被转rem)。 默认 0</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h2>","categories":["移动端"],"tags":["移动端","vue"]},{"title":"前端微服务（中）","url":"http://yoursite.com/2020/04/23/前端微服务（中）/","content":"<h2 id=\"single-spa-vue\"><a href=\"#single-spa-vue\" class=\"headerlink\" title=\"single-spa-vue\"></a>single-spa-vue</h2><blockquote>\n<p>single-spa-vue 是提供给使用vue子项目使用的npm包。他可以快速和sigle-spa父项目集成，并提供了一些比较便携的api。用于 子项目 使用</p>\n</blockquote>\n<h3 id=\"新建导航主项目\"><a href=\"#新建导航主项目\" class=\"headerlink\" title=\"新建导航主项目\"></a>新建导航主项目</h3><ul>\n<li>vue-cli4直接使用vue create parent命令生成一个vue项目。</li>\n</ul>\n<blockquote>\n<p>需要注意的是，导航项目路由必须用 history 模式</p>\n</blockquote>\n<ul>\n<li>npm install ant-design-vue single-spa –save -d</li>\n<li>我们注册一个子服务路由，只是注册， 不填写component字段</li>\n<li>src目录下新建文件single-spa-config.js</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import * as singleSpa from <span class=\"string\">\"single-spa\"</span>; //导入single-spa</span><br><span class=\"line\">/*</span><br><span class=\"line\"> * runScript：一个promise同步方法。可以代替创建一个script标签，然后加载服务</span><br><span class=\"line\"> * */</span><br><span class=\"line\">const runScript = async url =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">return</span> new Promise((resolve, reject) =&gt; &#123;</span><br><span class=\"line\">    const script = document.createElement(<span class=\"string\">\"script\"</span>);</span><br><span class=\"line\">    script.src = url;</span><br><span class=\"line\">    script.onload = resolve;</span><br><span class=\"line\">    script.onerror = reject;</span><br><span class=\"line\">    const firstScript = document.getElementsByTagName(<span class=\"string\">\"script\"</span>)[0];</span><br><span class=\"line\">    firstScript.parentNode.insertBefore(script, firstScript);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">/*</span><br><span class=\"line\"> * registerApplication：注册子项目的方法</span><br><span class=\"line\"> * 参数：appName:子项目名称  </span><br><span class=\"line\"> * applicationOrLoadingFn:子项目注册函数，用户需要返回 single-spa 的生命周期对象</span><br><span class=\"line\"> * activityFn: 回调函数入参 location 对象，可以写自定义匹配路由加载规则。</span><br><span class=\"line\"> * */</span><br><span class=\"line\"></span><br><span class=\"line\">singleSpa.registerApplication(</span><br><span class=\"line\">  <span class=\"string\">\"singleDemo\"</span>,</span><br><span class=\"line\">  async () =&gt; &#123;</span><br><span class=\"line\">    await runScript(<span class=\"string\">\"http://127.0.0.1:3000/js/chunk-vendors.js\"</span>);</span><br><span class=\"line\">    await runScript(<span class=\"string\">\"http://127.0.0.1:3000/js/app.js\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> window.singleVue;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  location =&gt; location.pathname.startsWith(<span class=\"string\">\"/vue\"</span>) // 配置微前端模块前缀</span><br><span class=\"line\">);</span><br><span class=\"line\">singleSpa.registerApplication(</span><br><span class=\"line\">  <span class=\"string\">\"reactApp\"</span>,</span><br><span class=\"line\">  async () =&gt; &#123;</span><br><span class=\"line\">    await runScript(<span class=\"string\">\"http://localhost:3001/static/js/main.js\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> window.reactApp;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  location =&gt; location.pathname.startsWith(<span class=\"string\">\"/react\"</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">// 启动函数</span><br><span class=\"line\">singleSpa.start();</span><br></pre></td></tr></table></figure>\n<h3 id=\"注册vue子项目\"><a href=\"#注册vue子项目\" class=\"headerlink\" title=\"注册vue子项目\"></a>注册vue子项目</h3><ul>\n<li>vue-cli4直接使用vue create vue-child命令生成一个vue项目。</li>\n<li>npm install single-spa-vue –save -d</li>\n<li>main.js</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import singleSpaVue from <span class=\"string\">\"single-spa-vue\"</span>;</span><br><span class=\"line\">import Vue from <span class=\"string\">'vue'</span></span><br><span class=\"line\">const vueOptions = &#123;</span><br><span class=\"line\">    el: <span class=\"string\">\"#vue\"</span>,</span><br><span class=\"line\">    router,</span><br><span class=\"line\">    store,</span><br><span class=\"line\">    render: h =&gt; h(App)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">// singleSpaVue包装一个vue微前端服务对象</span><br><span class=\"line\">const vueLifecycles = singleSpaVue(&#123;</span><br><span class=\"line\">    Vue,</span><br><span class=\"line\">    appOptions: vueOptions</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">// 导出生命周期对象</span><br><span class=\"line\"><span class=\"built_in\">export</span> const bootstrap = vueLifecycles.bootstrap; // 启动时</span><br><span class=\"line\"><span class=\"built_in\">export</span> const mount = vueLifecycles.mount; // 挂载时</span><br><span class=\"line\"><span class=\"built_in\">export</span> const unmount = vueLifecycles.unmount; // 卸载时</span><br><span class=\"line\"><span class=\"built_in\">export</span> default vueLifecycles;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>新建文件vue.config.js</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">    publicPath: <span class=\"string\">\"//localhost:3000/\"</span>,</span><br><span class=\"line\">    // css在所有环境下，都不单独打包为文件。这样是为了保证最小引入（只引入js）</span><br><span class=\"line\">    css: &#123;</span><br><span class=\"line\">        extract: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    configureWebpack: &#123;</span><br><span class=\"line\">        devtool: <span class=\"string\">'none'</span>, // 不打包sourcemap</span><br><span class=\"line\">        output: &#123;</span><br><span class=\"line\">            library: <span class=\"string\">\"singleVue\"</span>, // 导出名称</span><br><span class=\"line\">            libraryTarget: <span class=\"string\">\"window\"</span>, //挂载目标</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    devServer: &#123;</span><br><span class=\"line\">        contentBase: <span class=\"string\">'./'</span>,</span><br><span class=\"line\">        compress: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>packjson.json 配置 vue-cli-service serve –port 3000</li>\n</ul>\n<h3 id=\"样式隔离-postcss-selector-namespace\"><a href=\"#样式隔离-postcss-selector-namespace\" class=\"headerlink\" title=\"样式隔离 postcss-selector-namespace\"></a>样式隔离 postcss-selector-namespace</h3><ul>\n<li>npm install postcss-selector-namespace –save -d</li>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div class=<span class=\"string\">\"single-spa-vue\"</span>&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>项目目录下新建文件 postcss.config.js</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// postcss.config.js</span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  plugins: &#123;</span><br><span class=\"line\">    // postcss-selector-namespace: 给所有css添加统一前缀，然后父项目添加命名空间</span><br><span class=\"line\">    <span class=\"string\">'postcss-selector-namespace'</span>: &#123;</span><br><span class=\"line\">      namespace(css) &#123;</span><br><span class=\"line\">        // element-ui的样式不需要添加命名空间</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (css.includes(<span class=\"string\">'element-variables.scss'</span>)) <span class=\"built_in\">return</span> <span class=\"string\">''</span>;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">'.single-spa-vue'</span> // 返回要添加的类名</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"独立运行\"><a href=\"#独立运行\" class=\"headerlink\" title=\"独立运行\"></a>独立运行</h3><p>single-spa 有个属性，叫做 window.singleSpaNavigate。如果为true，代表就是single-spa模式。如果false，就可以独立渲染。</p>\n<ul>\n<li><p>main.js</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">if</span> (!window.singleSpaNavigate) &#123; // 如果不是single-spa模式</span><br><span class=\"line\">  delete vueOptions.el;</span><br><span class=\"line\">  new Vue(vueOptions).<span class=\"variable\">$mount</span>(<span class=\"string\">'#vue'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"single-spa-react\"><a href=\"#single-spa-react\" class=\"headerlink\" title=\"single-spa-react\"></a>single-spa-react</h2><blockquote>\n<p>single-spa-react 是提供给使用react子项目使用的npm包。他可以快速和sigle-spa父项目集成，并提供了一些比较便携的api。用于 子项目 使用</p>\n</blockquote>\n<h3 id=\"注册react子项目\"><a href=\"#注册react子项目\" class=\"headerlink\" title=\"注册react子项目\"></a>注册react子项目</h3><ul>\n<li>create-react-app react-child</li>\n<li>npm install single-spa-react –save -d</li>\n<li><p>index.js</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> import React from <span class=\"string\">'react'</span>;</span><br><span class=\"line\">import ReactDOM from <span class=\"string\">'react-dom'</span>;</span><br><span class=\"line\">import singleSpaReact from <span class=\"string\">'single-spa-react'</span>;</span><br><span class=\"line\">import App from <span class=\"string\">'./App'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">// 判断当前页面使用singleSpa应用,不是就渲染</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!window.singleSpaNavigate) &#123;</span><br><span class=\"line\">    ReactDOM.render(&lt;App /&gt;, document.getElementById(<span class=\"string\">'root'</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">const reactLifecycles = singleSpaReact(&#123;</span><br><span class=\"line\">    React,</span><br><span class=\"line\">    ReactDOM,</span><br><span class=\"line\">    rootComponent: App,</span><br><span class=\"line\">    domElementGetter: () =&gt; document.getElementById(<span class=\"string\">'react-app'</span>) // 指定要挂载到哪个dom元素上面</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> const bootstrap = [</span><br><span class=\"line\">    reactLifecycles.bootstrap,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> const mount = [</span><br><span class=\"line\">    reactLifecycles.mount,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> const unmount = [</span><br><span class=\"line\">    reactLifecycles.unmount,</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"推荐文章\"><a href=\"#推荐文章\" class=\"headerlink\" title=\"推荐文章\"></a>推荐文章</h2><blockquote>\n<p><a href=\"https://github.com/phodal/microfrontends#实施微前端的六种方式\" target=\"_blank\" rel=\"noopener\">《前端架构：从入门到微前端》</a><br><a href=\"https://insights.thoughtworks.cn/micro-frontends-2/\" target=\"_blank\" rel=\"noopener\">「微前端」- 将微服务理念扩展到前端开发（实战篇）</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzIyMzAwNzExNg==&amp;mid=2650864735&amp;idx=1&amp;sn=e88f14c7fb68ab4729c65fe63519a88d&amp;chksm=f3d084bcc4a70daa7d5c1460ee88b0cd564824ab95ddd54a53a50ae0c5f7e693a37a91cfb41b&amp;mpshare=1&amp;scene=1&amp;srcid=0311rFvD4pp8xoiiGc1t8t3J&amp;sharer_sharetime=1583914678399&amp;sharer_shareid=f79d79d0d8567c8108be1ccf56d88d74%23rd\" target=\"_blank\" rel=\"noopener\">【前端架构】微前端实战</a><br><a href=\"https://zhuanlan.zhihu.com/p/110881093?utm_source=wechat_session&amp;utm_medium=social&amp;utm_oi=26747382792192&amp;from=timeline&amp;isappinstalled=0&amp;s_s_i=9TzqhFn1mXqEr7SCdVspzzSjNosXvEK+NXMkH+t/7VY=&amp;s_r=1\" target=\"_blank\" rel=\"noopener\">从微前端到微后端，不可思议的前端架构思考</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzUxNzk1MjQ0Ng==&amp;mid=2247484815&amp;idx=1&amp;sn=fa4967219db3f336b5e0e2289245c6a3&amp;chksm=f991035ecee68a48e05ef203c29678567ef699e91bb3190d873e717117bced94c6b178bc9add&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1582516893873&amp;sharer_shareid=f79d79d0d8567c8108be1ccf56d88d74%23rd\" target=\"_blank\" rel=\"noopener\">爱奇艺号微前端架构实践</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzA3NDcyMTQyNQ==&amp;mid=2649263627&amp;idx=1&amp;sn=de7cef40deef9a3a3a1364edc302833b&amp;chksm=87675ff5b010d6e3b83564f213ce1894b39f76d4e14e5f31b2155ca872422a35c465b3af6a1c&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1582862519669&amp;sharer_shareid=f79d79d0d8567c8108be1ccf56d88d74%23rd\" target=\"_blank\" rel=\"noopener\">Bifrost微前端框架及其在美团闪购中的实践</a><br><a href=\"https://zhuanlan.zhihu.com/p/39102712\" target=\"_blank\" rel=\"noopener\">实施前端微服务化的六七种方式</a><br><a href=\"https://qiankun.umijs.org/zh/\" target=\"_blank\" rel=\"noopener\">阿里的qiankun框架</a><br><a href=\"https://juejin.im/post/5e17f064e51d45315d648b95\" target=\"_blank\" rel=\"noopener\">前端微服务在字节跳动的打磨与应用</a><br><a href=\"https://juejin.im/post/5d7f702ce51d4561f777e258\" target=\"_blank\" rel=\"noopener\">每日优鲜供应链前端团队微前端改造</a><br><a href=\"https://mp.weixin.qq.com/s/x2N-Y5xZV-XbrqxDT_wLKA\" target=\"_blank\" rel=\"noopener\">网易严选企业级微前端解决方案与落地实践</a></p>\n</blockquote>\n","categories":["框架"],"tags":["微服务框架"]},{"title":"前端微服务（上）","url":"http://yoursite.com/2020/04/20/前端微服务（上）/","content":"<h2 id=\"什么是微服务？\"><a href=\"#什么是微服务？\" class=\"headerlink\" title=\"什么是微服务？\"></a>什么是微服务？</h2><blockquote>\n<p>微前端是一种类似于微服务的架构，它将微服务的理念应用于浏览器端，即将单页面前端应用由单一的单体应用转变为多个小型前端应用聚合为一的应用。各个前端应用还可以独立开发、独立部署。同时，它们也可以在共享组件的同时进行并行开发——这些组件可以通过 NPM 或者Git Tag、Git Submodule 来管理。</p>\n</blockquote>\n<blockquote>\n<p>本质上就是把一个大型的应用拆分为很多个独立的模块，每一个模块的可以单独的开发、调试并上线。</p>\n</blockquote>\n<h2 id=\"微服务应用\"><a href=\"#微服务应用\" class=\"headerlink\" title=\"微服务应用\"></a>微服务应用</h2><p>多个 app 在一个页面里。尤其是做 B 端的。一个应用多个模块。</p>\n<p><img src=\"https://raw.githubusercontent.com/mwy516/MarkdownPhotos/master/microService.png\" alt=\"Microservice\"></p>\n<blockquote>\n<ul>\n<li>项目过于庞大,代码编译慢</li>\n<li>单一技术栈无法满足你的业务需求</li>\n</ul>\n</blockquote>\n<h2 id=\"实现方案\"><a href=\"#实现方案\" class=\"headerlink\" title=\"实现方案\"></a>实现方案</h2><p>其中比较常见的就是iframe和single-spa</p>\n<h3 id=\"iframe和single-spa的优缺点\"><a href=\"#iframe和single-spa的优缺点\" class=\"headerlink\" title=\"iframe和single-spa的优缺点\"></a>iframe和single-spa的优缺点</h3><h4 id=\"iframe\"><a href=\"#iframe\" class=\"headerlink\" title=\"iframe\"></a>iframe</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;微前端-ifame&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;我是容器&lt;/h1&gt;</span><br><span class=\"line\">    &lt;iframe id=<span class=\"string\">\"mfeLoader\"</span>&gt;&lt;/iframe&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">      const routes = &#123;</span><br><span class=\"line\">        <span class=\"string\">'/'</span>: <span class=\"string\">'https://app.com/index.html'</span>,</span><br><span class=\"line\">        <span class=\"string\">'/app1'</span>: <span class=\"string\">'https://app1.com/index.html'</span>,</span><br><span class=\"line\">        <span class=\"string\">'/app2'</span>: <span class=\"string\">'https://app2.com/index.html'</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">      const iframe = document.querySelector(<span class=\"string\">'#mfeLoader'</span>);</span><br><span class=\"line\">      iframe.src = routes[window.location.pathname];</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h5><ul>\n<li>页面加载问题: 影响主页面加载，阻塞onload事件，本身加载也很慢，页面缓存过多会导致电脑卡顿。(无法解决)</li>\n<li>会产生很多页面，不易管理</li>\n<li>很多移动设备无法完全显示框架，设备兼容性差</li>\n<li>iframe框架页面会增加服务器的http请求，对于大型网站是不可取的</li>\n</ul>\n<h5 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h5><ul>\n<li>完全隔离了css和js，避免了各个系统之间的样式和js污染</li>\n<li>iframe能够把嵌入的网页原样展现出来</li>\n</ul>\n<h4 id=\"single-spa\"><a href=\"#single-spa\" class=\"headerlink\" title=\"single-spa\"></a>single-spa</h4><blockquote>\n<p>single-spa 一个基于JavaScript的 微前端 框架，他可以用于构建可共存的微前端应用，每个前端应用都可以用自己的框架编写，完美支持 Vue React Angular。可以实现 服务注册 事件监听 子父组件通信 等功能。 用于 父项目 集成子项目使用</p>\n</blockquote>\n<h5 id=\"缺点-1\"><a href=\"#缺点-1\" class=\"headerlink\" title=\"缺点\"></a>缺点</h5><ul>\n<li>css和js需要制定规范，进行隔离。否则容易造成全局污染</li>\n</ul>\n<h5 id=\"优点-1\"><a href=\"#优点-1\" class=\"headerlink\" title=\"优点\"></a>优点</h5><ul>\n<li>加载快，可以将所有系统共用的模块提取出来，实现按需加载，一次加载，其他的复用。</li>\n<li>修改子系统的样式，不需要代理服务器，直接修改，因为同属于一个document。</li>\n<li>用户体验好、快，内容的改变不需要重新加载整个页面，避免了不必要的跳转和重复渲染</li>\n<li>http请求少，服务器压力小。</li>\n</ul>\n<h4 id=\"single-spa和iframe对比\"><a href=\"#single-spa和iframe对比\" class=\"headerlink\" title=\"single-spa和iframe对比\"></a>single-spa和iframe对比</h4><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">对比项</th>\n<th style=\"text-align:right\">single-spa</th>\n<th style=\"text-align:center\">iframe</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">加载速度</td>\n<td style=\"text-align:right\">公用模块可提取，实现按需加载，加载快</td>\n<td style=\"text-align:center\">影响主系统的加载，加载速度很慢</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">兼容性</td>\n<td style=\"text-align:right\">single-spa只适用于vue、react、angular编写的系统，对一些jq写的老系统无能为力</td>\n<td style=\"text-align:center\">iframe则可以嵌入任何页面</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">技术难度</td>\n<td style=\"text-align:right\">single-spa需要一定的技术储备，有一些学习成本</td>\n<td style=\"text-align:center\">iframe门槛则很低，无需额外学习</td>\n</tr>\n</tbody>\n</table>\n","categories":["框架"],"tags":[]},{"title":"vue项目中插件","url":"http://yoursite.com/2020/04/03/vue/","content":"<h3 id=\"1、实现复制功能-vue-clipboard2\"><a href=\"#1、实现复制功能-vue-clipboard2\" class=\"headerlink\" title=\"1、实现复制功能 vue-clipboard2\"></a>1、实现复制功能 vue-clipboard2</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-clipboard2</span><br></pre></td></tr></table></figure>\n<h4 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h4><ul>\n<li>main.js</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import VueClipboard from <span class=\"string\">'vue-clipboard2'</span></span><br><span class=\"line\">VueClipboard.config.autoSetContainer = <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>DOM</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> v-clipboard:copy=<span class=\"string\">\"codeText\"</span> v-clipboard:success=<span class=\"string\">\"onCopy\"</span> v-clipboard:error=<span class=\"string\">\"onError\"</span>&gt;复制&lt;/button&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  onCopy(e) &#123;</span><br><span class=\"line\">    this.<span class=\"variable\">$message</span>(&#123;message: <span class=\"string\">'复制成功'</span>, <span class=\"built_in\">type</span>: <span class=\"string\">'success'</span>&#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onError(e) &#123;</span><br><span class=\"line\">    this.<span class=\"variable\">$message</span>.error(<span class=\"string\">'复制失败'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["插件"],"tags":["vue","插件"]},{"title":"JS 数据处理技巧及小算法汇总","url":"http://yoursite.com/2019/09/01/data/","content":"<h3 id=\"1、根据属性来更新一个数组中的对象\"><a href=\"#1、根据属性来更新一个数组中的对象\" class=\"headerlink\" title=\"1、根据属性来更新一个数组中的对象:\"></a>1、根据属性来更新一个数组中的对象:</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const arr = [ &#123;id: 1, score: 1&#125;, &#123;id: 2, score: 2&#125;, &#123;id: 3, score: 4&#125;];</span><br><span class=\"line\">//更新的值</span><br><span class=\"line\">const newValue = &#123;id: 3, score: 3&#125;</span><br><span class=\"line\">更新数组中id为3的score值。</span><br><span class=\"line\">Es6 写法如下： </span><br><span class=\"line\">const result = arr.map(x =&gt; x.id === newValue.id ? newValue : x); </span><br><span class=\"line\">console.log(result) \t//=&gt;[&#123;id:1,score:1&#125;,&#123;id:2,score:2&#125;,&#123;id:3,score:3&#125;]</span><br><span class=\"line\">数字map：</span><br><span class=\"line\">const updated = arr.map(<span class=\"keyword\">function</span>(item)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> item.id == newValue.id ? newValue : item ;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">　console.log(updated)  \t//=&gt;[&#123;id:1,score:1&#125;,&#123;id:2,score:2&#125;,&#123;id:3,score:3&#125;]</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-数组去重\"><a href=\"#2-数组去重\" class=\"headerlink\" title=\"2.数组去重\"></a>2.数组去重</h4><h4 id=\"方案-A\"><a href=\"#方案-A\" class=\"headerlink\" title=\"方案 A\"></a>方案 A</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> unique(ar) &#123;</span><br><span class=\"line\">    var ret = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (var i = 0, j = ar.length; i &lt; j; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ret.indexOf(ar[i]) === -1) &#123;</span><br><span class=\"line\">            ret.push(ar[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"方案-B-ES6\"><a href=\"#方案-B-ES6\" class=\"headerlink\" title=\"方案 B ES6\"></a>方案 B ES6</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const numbers = [1, 2, 1, 1, 2, 1, 3, 4, 1 ];</span><br><span class=\"line\">const uniq = [...new Set(numbers)] \t\t// =&gt; [ 1, 2, 3, 4 ];</span><br><span class=\"line\">const uniq2 = Array.from(new Set(numbers)) // =&gt; [ 1, 2, 3, 4 ];</span><br></pre></td></tr></table></figure>\n<h4 id=\"方案-C-filter\"><a href=\"#方案-C-filter\" class=\"headerlink\" title=\"方案 C filter\"></a>方案 C filter</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> unique (arr) &#123;</span><br><span class=\"line\">     var res = arr.filter(<span class=\"keyword\">function</span> (item, index, array) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> array.indexOf(item) === index; </span><br><span class=\"line\">            //array.indexOf(item) === index 说明这个元素第一次出现，后面这个item再出现他的item肯定不是index了</span><br><span class=\"line\">&#125;) <span class=\"built_in\">return</span> res; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、根据属性删除数组中的一个对象：\"><a href=\"#3、根据属性删除数组中的一个对象：\" class=\"headerlink\" title=\"3、根据属性删除数组中的一个对象：\"></a>3、根据属性删除数组中的一个对象：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const initial = [ &#123;id: 1, score: 1&#125;, &#123;id: 2, score: 2&#125;, &#123;id: 3, score: 4&#125;];</span><br><span class=\"line\"> const removeId = 3;</span><br><span class=\"line\"> const without3 = initial.filter(x =&gt; x.id !== removeId);</span><br><span class=\"line\"> console.log(without3) // =&gt; [ &#123; id: 1, score: 1 &#125;, &#123; id: 2, score: 2 &#125; ]</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、删除一个对象上的属性（key）：\"><a href=\"#4、删除一个对象上的属性（key）：\" class=\"headerlink\" title=\"4、删除一个对象上的属性（key）：\"></a>4、删除一个对象上的属性（key）：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//ES6</span><br><span class=\"line\">const obj = &#123;a: 1, b: 2, c: 3&#125;;</span><br><span class=\"line\">const &#123;a, ...newObj&#125; = obj;</span><br><span class=\"line\">console.log(newObj) // =&gt; &#123;b: 2, c: 3&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"5、两个Set对象相减：\"><a href=\"#5、两个Set对象相减：\" class=\"headerlink\" title=\"5、两个Set对象相减：\"></a>5、两个Set对象相减：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const s1 = [ 1, 2, 3, 4, 5 ];</span><br><span class=\"line\"> const s2 = [ 2, 4 ];</span><br><span class=\"line\"> const subtracted = s1.filter(x =&gt; s2.indexOf(x) &lt; 0);</span><br><span class=\"line\"> console.log(subtracted);//[1,3,5]</span><br></pre></td></tr></table></figure>\n","categories":["js"],"tags":["js"]},{"title":"Git 常用命令","url":"http://yoursite.com/2019/06/01/git/","content":"<h3 id=\"git常用命令\"><a href=\"#git常用命令\" class=\"headerlink\" title=\"git常用命令\"></a>git常用命令</h3><ul>\n<li>git init //初始化本地git环境</li>\n<li>git clone XXX //克隆一份代码到本地仓库</li>\n<li>git pull //把远程库的代码更新到本地库</li>\n<li>git pull –rebase origin master //强制把远程代码更新到当前分支上面</li>\n<li>git fetch //把远程库的代码更新到本地库</li>\n<li>git add . //把本地的修改添加到stage中</li>\n<li>git commit -m ‘comments here’. //把stage中的修改提交到本地库</li>\n<li>git push //把本地库的修改提交到远程库中</li>\n<li>git branch -r/-a //查看远程分支/全部分支</li>\n<li>git checkout master/branch //切换到某个分支</li>\n<li>git checkout -b test //新建test分支</li>\n<li>git checkout -d test //删除test分支</li>\n<li>git merge master //假设当前在test分支上面，把master分支上的修改同步到test分支上</li>\n<li>git merge tool //调用merge工具</li>\n<li>git stash //把未完成的修改缓存到栈容器中</li>\n<li>git blame someFile //查看某个文件的某一行的修改记录（）谁在什么时候修改的</li>\n<li>git status //查看当前分支有哪些修改</li>\n<li>git log //查看当前分支上面的日志信息</li>\n<li>git diff //查看当前没有add的内容</li>\n<li>git diff –cache //查看已经add但是没有commit的内容</li>\n<li>echo $HOME //查看git config 的HOME路径</li>\n</ul>\n<h3 id=\"团队协作git操作流程\"><a href=\"#团队协作git操作流程\" class=\"headerlink\" title=\"团队协作git操作流程\"></a>团队协作git操作流程</h3><h4 id=\"克隆一个全新的项目，完成新功能并且提交：\"><a href=\"#克隆一个全新的项目，完成新功能并且提交：\" class=\"headerlink\" title=\"克隆一个全新的项目，完成新功能并且提交：\"></a>克隆一个全新的项目，完成新功能并且提交：</h4><ul>\n<li>git clone XXX //克隆代码库</li>\n<li>git checkout -b test //新建分支</li>\n<li>modify some files //完成修改</li>\n<li>git add . //把修改加入stage中</li>\n<li>git commit -m ‘ ‘ //提交修改到test分支</li>\n<li>git checkout master  //切换到master分支</li>\n<li>git pull  //更新代码</li>\n<li>git merge master  //假设当前在test分支上面，把master分支上的修改同步到test分支上</li>\n<li>git push origin 分支名 //把test分支的代码push到远程库</li>\n</ul>\n<h4 id=\"目前在test分支上开发某一功能，但是没有完成，突然有一个紧急的bug需要处理\"><a href=\"#目前在test分支上开发某一功能，但是没有完成，突然有一个紧急的bug需要处理\" class=\"headerlink\" title=\"目前在test分支上开发某一功能，但是没有完成，突然有一个紧急的bug需要处理\"></a>目前在test分支上开发某一功能，但是没有完成，突然有一个紧急的bug需要处理</h4><ul>\n<li>git add .</li>\n<li>git stash</li>\n<li>git checkout bugFixBranch</li>\n<li>git pull –rebase origin master</li>\n<li>fix the bug</li>\n<li>git add .</li>\n<li>git commit -m ‘’</li>\n<li>git push</li>\n<li>git checkout test</li>\n<li>git stash pop</li>\n<li>continue new feature’s development</li>\n</ul>\n<h4 id=\"回退到某个版本\"><a href=\"#回退到某个版本\" class=\"headerlink\" title=\"回退到某个版本\"></a>回退到某个版本</h4><ul>\n<li>feature-1 feature-2 feature-3 feature-4 feature-5 feature-6</li>\n<li>git reflog</li>\n<li>git reset –hard cd52afc</li>\n<li>回滚到了feature-1，在这个基础上新添加了一个commit提交，信息叫feature-7</li>\n<li>解决办法：</li>\n<li>git reflog</li>\n<li>git reset –hard cd52afc 回滚到feature-6</li>\n<li>git cherry-pick 4c97ff3 feature-7回来了</li>\n</ul>\n","categories":["工具"],"tags":["git"]},{"title":"H5常见问题及解决方案","url":"http://yoursite.com/2018/07/01/h5/","content":"<p>本文主要收集一些移动web开发中常见的问题和解决办法，在日常的工作中遇到新的问题会不定时更新到文章中。</p>\n<h3 id=\"1、Meta基础知识：\"><a href=\"#1、Meta基础知识：\" class=\"headerlink\" title=\"1、Meta基础知识：\"></a>1、Meta基础知识：</h3><h4 id=\"空白页基本meta标签\"><a href=\"#空白页基本meta标签\" class=\"headerlink\" title=\"空白页基本meta标签\"></a>空白页基本meta标签</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 设置缩放 --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\"</span> /&gt;   </span><br><span class=\"line\">// user-scalable    是否允许手动缩放  </span><br><span class=\"line\">&lt;!-- 可隐藏地址栏，仅针对IOS的Safari（注：IOS7.0版本以后，safari上已看不到效果） --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"apple-mobile-web-app-capable\"</span> content=<span class=\"string\">\"yes\"</span> /&gt;  </span><br><span class=\"line\">&lt;!-- 仅针对IOS的Safari顶端状态条的样式（可选default/black/black-translucent ） --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"apple-mobile-web-app-status-bar-style\"</span> content=<span class=\"string\">\"black\"</span> /&gt;  </span><br><span class=\"line\">&lt;!-- IOS中禁用将数字识别为电话号码/忽略Android平台中对邮箱地址的识别 --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"format-detection\"</span>content=<span class=\"string\">\"telephone=no, email=no\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"页面缓存设置\"><a href=\"#页面缓存设置\" class=\"headerlink\" title=\"页面缓存设置\"></a>页面缓存设置</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 清除缓存 --&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"pragma\"</span> content=<span class=\"string\">\"no-cache\"</span>&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"cache-control\"</span> content=<span class=\"string\">\"no-cache\"</span>&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"expires\"</span> content=<span class=\"string\">\"0\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br><span class=\"line\"></span><br><span class=\"line\">### 2、<span class=\"selector-tag\">CSS</span>部分：</span><br><span class=\"line\">* <span class=\"selector-tag\">iPhone</span> <span class=\"selector-tag\">X</span>适配</span><br><span class=\"line\"></span><br><span class=\"line\">``` <span class=\"selector-tag\">bash</span></span><br><span class=\"line\">// 1.viewport meta 标签增加属性viewport-fit=cover</span><br><span class=\"line\">&lt;meta name=\"viewport\" content=\"width=device-width, viewport-fit=cover, xxxx\"&gt;  </span><br><span class=\"line\">```</span><br><span class=\"line\">~~~<span class=\"selector-tag\">Css</span></span><br><span class=\"line\">// 2.body元素增加样式</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"built_in\">constant</span>(safe-area-inset-bottom);</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"built_in\">env</span>(safe-area-inset-bottom);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// 3.如有fixed底部的元素，也增加上面样式</span><br><span class=\"line\"><span class=\"selector-tag\">xxx</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"built_in\">constant</span>(safe-area-inset-bottom);</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"built_in\">env</span>(safe-area-inset-bottom);</span><br><span class=\"line\">  background-color: #fff; // 记得添加background-color，不然会出现透明镂空的情况</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>去除点击元素产生背景或边框</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* &#123; <span class=\"attribute\">-webkit-tap-highlight-color</span>: <span class=\"built_in\">rgba</span>(0,0,0,0); &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>禁止长按链接与图片弹出菜单</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>,<span class=\"selector-tag\">img</span>&#123;<span class=\"attribute\">-webkit-touch-callout</span>:none;&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>禁止用户选中图片或文字</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;<span class=\"attribute\">-webkit-user-select</span>: none&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>去除表单元素默认样式</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">input</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-appearance</span>:none;</span><br><span class=\"line\">  <span class=\"attribute\">outline</span>:none;</span><br><span class=\"line\">&#125;&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>超过一定宽度省略号…显示</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*指定字符串的宽度*/</span></span><br><span class=\"line\"><span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:300px</span>;   </span><br><span class=\"line\"><span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">hidden</span>;  </span><br><span class=\"line\"><span class=\"comment\">/* 当字符串超过规定长度，显示省略符*/</span> </span><br><span class=\"line\"><span class=\"selector-tag\">text-overflow</span><span class=\"selector-pseudo\">:ellipsis</span>;  </span><br><span class=\"line\"><span class=\"selector-tag\">white-space</span>: <span class=\"selector-tag\">nowrap</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、JS部分：\"><a href=\"#3、JS部分：\" class=\"headerlink\" title=\"3、JS部分：\"></a>3、JS部分：</h3><ul>\n<li>OS中不支持”2000-01-01 00:00:00”格式,返回NaN</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> time = <span class=\"string\">\"2000-01-01 00:00:00\"</span></span><br><span class=\"line\">time = time.replace(<span class=\"regexp\">/\\-/g</span>, <span class=\"string\">\"/\"</span>);<span class=\"comment\">//将时间格式的'-'转成'/'形式，兼容iOS</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>移动端click屏幕产生200-300ms的延时响应</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">引入js ： fastclick.min.js</span><br><span class=\"line\">引入   </span><br><span class=\"line\"> (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> attachFastClick = Origami.fastclick;</span><br><span class=\"line\">    attachFastClick(<span class=\"built_in\">document</span>.body);</span><br><span class=\"line\">  &#125;)()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>判断ios和Android</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var u = navigator.userAgent;</span><br><span class=\"line\">var isAndroid = u.indexOf(<span class=\"string\">'Android'</span>) &gt; -1 || u.indexOf(<span class=\"string\">'Adr'</span>) &gt; -1; //android终端</span><br><span class=\"line\">var isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端</span><br><span class=\"line\">var isWeixin = (/MicroMessenger/ig).<span class=\"built_in\">test</span>(u);</span><br><span class=\"line\">var isQQ = (/qq/ig).<span class=\"built_in\">test</span>(u);</span><br></pre></td></tr></table></figure>\n","categories":["h5"],"tags":["移动端"]},{"title":"React全家桶+AntD 共享单车后台管理系统开发","url":"http://yoursite.com/2018/04/01/react/","content":"<p>React+React-Router+Redux+AntD+Echarts</p>\n<h2 id=\"第一章-React介绍：\"><a href=\"#第一章-React介绍：\" class=\"headerlink\" title=\"第一章 React介绍：\"></a>第一章 React介绍：</h2><h3 id=\"第一节：React基本介绍\"><a href=\"#第一节：React基本介绍\" class=\"headerlink\" title=\"第一节：React基本介绍\"></a>第一节：React基本介绍</h3><ul>\n<li>Facebook 开源的一个JavaScript库</li>\n<li>React结合生态库构成一个MV*框架<ul>\n<li>只关注视图View层+数据层Model</li>\n<li>生态介绍<ul>\n<li>Vue生态：Vue+Vue-Router+Vuex+Axios+Babel+Webpack</li>\n<li>React生态：React+React-Router+Redux+Axios+Babel+Webpack</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>React特点<ul>\n<li>Declarative(声明式编码）<ul>\n<li>编程式实现<ul>\n<li>需要以具体代码表达在哪里（where）做什么（what），如何实现（how）</li>\n</ul>\n</li>\n<li>声明式实现<ul>\n<li>只需要声明在哪里（vhere）做什么（what），而无需关心如何实现（how）m</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Component-Based(组件化编码)</li>\n<li>高效-高效的DOM Diff算法，最小化页面重绘</li>\n<li>单向数据流</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"第二节：React脚手架、Yarn介绍\"><a href=\"#第二节：React脚手架、Yarn介绍\" class=\"headerlink\" title=\"第二节：React脚手架、Yarn介绍\"></a>第二节：React脚手架、Yarn介绍</h3><ul>\n<li>如何安装React脚手架</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g create-react-app</span><br><span class=\"line\">create-react-app my-app</span><br><span class=\"line\"><span class=\"built_in\">cd</span> my-app</span><br><span class=\"line\">npm start</span><br></pre></td></tr></table></figure>\n<ul>\n<li>如何使用脚手架初始化项目</li>\n<li>什么是Yarn，为什么要使用Yarn<ul>\n<li>Yarn是新一代包管理工具</li>\n<li>速度快</li>\n<li>安装版本统一、更安全</li>\n<li>更简洁的输出</li>\n<li>更好的语义化</li>\n</ul>\n</li>\n<li>如何使用Yarn<ul>\n<li>yarn init</li>\n<li>yarn add</li>\n<li>yarn remove</li>\n<li>yarn/yarn install</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"第三节：React生命周期介绍\"><a href=\"#第三节：React生命周期介绍\" class=\"headerlink\" title=\"第三节：React生命周期介绍\"></a>第三节：React生命周期介绍</h3><ul>\n<li>React生命周期包含哪些<ul>\n<li>getDefaultProps</li>\n<li>getinitialState</li>\n<li>componentWillMount</li>\n<li>render</li>\n<li>componentDidMount</li>\n<li>componentWillReceiveProps</li>\n<li>shouldComponentUpdate</li>\n<li>componentWillUpdate</li>\n<li>componentDidUpdate</li>\n<li>componentWillUnmount</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第二章-项目主页工程搭建：\"><a href=\"#第二章-项目主页工程搭建：\" class=\"headerlink\" title=\"第二章 项目主页工程搭建：\"></a>第二章 项目主页工程搭建：</h2><h3 id=\"第一节：基础插件安装，Less文件加载配置\"><a href=\"#第一节：基础插件安装，Less文件加载配置\" class=\"headerlink\" title=\"第一节：基础插件安装，Less文件加载配置\"></a>第一节：基础插件安装，Less文件加载配置</h3><ul>\n<li><p>安装所需的插件</p>\n<ul>\n<li><p>安装React-Router、Axios</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add react-router-dom axios less-loader less</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装AntD</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add antd</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安装babel-plugin-import(按需加载配置:antd官网有说明)</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add babel-plugin-import --dev</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>暴露webpack配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn eject</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装less-loader</p>\n</li>\n<li><p>修改less-loader</p>\n<ul>\n<li>webpack.config.dev.js，webpack.config.prod.js添加</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">     <span class=\"built_in\">test</span>: /\\.less$/,</span><br><span class=\"line\">     use: [</span><br><span class=\"line\">       require.resolve(<span class=\"string\">'style-loader'</span>),</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">         loader: require.resolve(<span class=\"string\">'css-loader'</span>),</span><br><span class=\"line\">         options: &#123;</span><br><span class=\"line\">           importLoaders: 1,</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">         loader: require.resolve(<span class=\"string\">'postcss-loader'</span>),</span><br><span class=\"line\">         options: &#123;</span><br><span class=\"line\">           // Necessary <span class=\"keyword\">for</span> external CSS imports to work</span><br><span class=\"line\">           // https://github.com/facebookincubator/create-react-app/issues/2677</span><br><span class=\"line\">           ident: <span class=\"string\">'postcss'</span>,</span><br><span class=\"line\">           plugins: () =&gt; [</span><br><span class=\"line\">             require(<span class=\"string\">'postcss-flexbugs-fixes'</span>),</span><br><span class=\"line\">             autoprefixer(&#123;</span><br><span class=\"line\">               browsers: [</span><br><span class=\"line\">                 <span class=\"string\">'&gt;1%'</span>,</span><br><span class=\"line\">                 <span class=\"string\">'last 4 versions'</span>,</span><br><span class=\"line\">                 <span class=\"string\">'Firefox ESR'</span>,</span><br><span class=\"line\">                 <span class=\"string\">'not ie &lt; 9'</span>, // React doesn<span class=\"string\">'t support IE8 anyway</span></span><br><span class=\"line\"><span class=\"string\">               ],</span></span><br><span class=\"line\"><span class=\"string\">               flexbox: '</span>no-2009<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">             &#125;),</span></span><br><span class=\"line\"><span class=\"string\">           ],</span></span><br><span class=\"line\"><span class=\"string\">         &#125;,</span></span><br><span class=\"line\"><span class=\"string\">       &#125;,</span></span><br><span class=\"line\"><span class=\"string\">       &#123;</span></span><br><span class=\"line\"><span class=\"string\">         loader:require.resolve('</span>less-loader<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">       &#125;</span></span><br><span class=\"line\"><span class=\"string\">     ],</span></span><br><span class=\"line\"><span class=\"string\">   &#125;,</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"第二节：项目主页结构开发\"><a href=\"#第二节：项目主页结构开发\" class=\"headerlink\" title=\"第二节：项目主页结构开发\"></a>第二节：项目主页结构开发</h3><ul>\n<li>主页结构定义<ul>\n<li>页面结构定义</li>\n<li>目录结构定义</li>\n<li>栅格系统使用</li>\n<li>calc计算方法使用</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"第三节：菜单组件开发\"><a href=\"#第三节：菜单组件开发\" class=\"headerlink\" title=\"第三节：菜单组件开发\"></a>第三节：菜单组件开发</h3><h3 id=\"第四节：头部组件开发\"><a href=\"#第四节：头部组件开发\" class=\"headerlink\" title=\"第四节：头部组件开发\"></a>第四节：头部组件开发</h3><h3 id=\"第五节：底部组件开发\"><a href=\"#第五节：底部组件开发\" class=\"headerlink\" title=\"第五节：底部组件开发\"></a>第五节：底部组件开发</h3><h2 id=\"第三章-Router-4-0路由：\"><a href=\"#第三章-Router-4-0路由：\" class=\"headerlink\" title=\"第三章 Router 4.0路由：\"></a>第三章 Router 4.0路由：</h2><h3 id=\"第一节：React-Router-4-0基本概念介绍\"><a href=\"#第一节：React-Router-4-0基本概念介绍\" class=\"headerlink\" title=\"第一节：React Router 4.0基本概念介绍\"></a>第一节：React Router 4.0基本概念介绍</h3><ul>\n<li>核心概念及用法介绍<ul>\n<li>react-router</li>\n<li>react-router-dom<ul>\n<li>react-router和react-router-dom理解<ul>\n<li>4.0版本中已不需要路由配置，一切皆组件</li>\n<li>react-router：提供一些router的核心api，包括Router，Route，Switch等</li>\n<li>react-router-dom：提供了BrowerRouter，HashRouter，Route，Link，NavLink</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>路由模块安装<ul>\n<li>npm install react-router-dom –save</li>\n<li>yarn add react-router-dom</li>\n</ul>\n</li>\n<li>react-router-dom核心用法<ul>\n<li>HashRouter和BrowerRouter<ul>\n<li><a href=\"http://localhost:3000/#/admin/button\" target=\"_blank\" rel=\"noopener\">http://localhost:3000/#/admin/button</a></li>\n<li><a href=\"http://localhost:3000/admin/button\" target=\"_blank\" rel=\"noopener\">http://localhost:3000/admin/button</a></li>\n</ul>\n</li>\n<li>Route：path、exact、component、render</li>\n<li>NavLink、Link</li>\n<li>Switch</li>\n<li>Redirect</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"第二节：React-Router-4-0-Demo-介绍\"><a href=\"#第二节：React-Router-4-0-Demo-介绍\" class=\"headerlink\" title=\"第二节：React Router 4.0 Demo 介绍\"></a>第二节：React Router 4.0 Demo 介绍</h3><h3 id=\"第三节：项目路由实战开发\"><a href=\"#第三节：项目路由实战开发\" class=\"headerlink\" title=\"第三节：项目路由实战开发\"></a>第三节：项目路由实战开发</h3><h2 id=\"第四章-AntD-UI组件\"><a href=\"#第四章-AntD-UI组件\" class=\"headerlink\" title=\"第四章 AntD UI组件\"></a>第四章 AntD UI组件</h2><h3 id=\"第一节：Button组件使用讲解\"><a href=\"#第一节：Button组件使用讲解\" class=\"headerlink\" title=\"第一节：Button组件使用讲解\"></a>第一节：Button组件使用讲解</h3><h3 id=\"第二节：Modal组件使用讲解\"><a href=\"#第二节：Modal组件使用讲解\" class=\"headerlink\" title=\"第二节：Modal组件使用讲解\"></a>第二节：Modal组件使用讲解</h3><h3 id=\"第三节：Loading组件使用讲解\"><a href=\"#第三节：Loading组件使用讲解\" class=\"headerlink\" title=\"第三节：Loading组件使用讲解\"></a>第三节：Loading组件使用讲解</h3><h3 id=\"第四节：Notice组件使用讲解\"><a href=\"#第四节：Notice组件使用讲解\" class=\"headerlink\" title=\"第四节：Notice组件使用讲解\"></a>第四节：Notice组件使用讲解</h3><h3 id=\"第五节：Message组件使用讲解\"><a href=\"#第五节：Message组件使用讲解\" class=\"headerlink\" title=\"第五节：Message组件使用讲解\"></a>第五节：Message组件使用讲解</h3><h3 id=\"第六节：Tab组件使用讲解\"><a href=\"#第六节：Tab组件使用讲解\" class=\"headerlink\" title=\"第六节：Tab组件使用讲解\"></a>第六节：Tab组件使用讲解</h3><h3 id=\"第七节：Gallery组件使用讲解\"><a href=\"#第七节：Gallery组件使用讲解\" class=\"headerlink\" title=\"第七节：Gallery组件使用讲解\"></a>第七节：Gallery组件使用讲解</h3><h3 id=\"第八节：Carousel组件使用讲解\"><a href=\"#第八节：Carousel组件使用讲解\" class=\"headerlink\" title=\"第八节：Carousel组件使用讲解\"></a>第八节：Carousel组件使用讲解</h3><h2 id=\"第五章-AntD-Form基础组件\"><a href=\"#第五章-AntD-Form基础组件\" class=\"headerlink\" title=\"第五章 AntD Form基础组件\"></a>第五章 AntD Form基础组件</h2><h3 id=\"第一节：使用Form组件开发登录页面\"><a href=\"#第一节：使用Form组件开发登录页面\" class=\"headerlink\" title=\"第一节：使用Form组件开发登录页面\"></a>第一节：使用Form组件开发登录页面</h3><h3 id=\"第二节：使用Form组件开发注册页面\"><a href=\"#第二节：使用Form组件开发注册页面\" class=\"headerlink\" title=\"第二节：使用Form组件开发注册页面\"></a>第二节：使用Form组件开发注册页面</h3><h2 id=\"第六章-基础表格、高级表格使用\"><a href=\"#第六章-基础表格、高级表格使用\" class=\"headerlink\" title=\"第六章 基础表格、高级表格使用\"></a>第六章 基础表格、高级表格使用</h2><h3 id=\"第一节：基础表格用法\"><a href=\"#第一节：基础表格用法\" class=\"headerlink\" title=\"第一节：基础表格用法\"></a>第一节：基础表格用法</h3><h3 id=\"第二节：项目工程化-Table动态渲染\"><a href=\"#第二节：项目工程化-Table动态渲染\" class=\"headerlink\" title=\"第二节：项目工程化-Table动态渲染\"></a>第二节：项目工程化-Table动态渲染</h3><ul>\n<li>项目工程化-Mock数据</li>\n<li>项目工程化-Axios封装</li>\n<li>项目工程化-Loading处理，错误拦截</li>\n</ul>\n<h2 id=\"第七章-项目工程化\"><a href=\"#第七章-项目工程化\" class=\"headerlink\" title=\"第七章 项目工程化\"></a>第七章 项目工程化</h2><h2 id=\"第八章-地图模块\"><a href=\"#第八章-地图模块\" class=\"headerlink\" title=\"第八章 地图模块\"></a>第八章 地图模块</h2><h2 id=\"第九章-图表模块inst\"><a href=\"#第九章-图表模块inst\" class=\"headerlink\" title=\"第九章 图表模块inst\"></a>第九章 图表模块inst</h2><h2 id=\"第十章-权限设置模块\"><a href=\"#第十章-权限设置模块\" class=\"headerlink\" title=\"第十章 权限设置模块\"></a>第十章 权限设置模块</h2><h2 id=\"第十一章-Redux集成开发\"><a href=\"#第十一章-Redux集成开发\" class=\"headerlink\" title=\"第十一章 Redux集成开发\"></a>第十一章 Redux集成开发</h2><h2 id=\"Rreact-Native-常见错误总结\"><a href=\"#Rreact-Native-常见错误总结\" class=\"headerlink\" title=\"Rreact Native 常见错误总结\"></a>Rreact Native 常见错误总结</h2><h4 id=\"问题1-Uncaught-TypeError-Super-expression-must-either-be-null-or-a-function-not-undefined\"><a href=\"#问题1-Uncaught-TypeError-Super-expression-must-either-be-null-or-a-function-not-undefined\" class=\"headerlink\" title=\"问题1:Uncaught TypeError: Super expression must either be null or a function, not undefined\"></a>问题1:Uncaught TypeError: Super expression must either be null or a function, not undefined</h4><ul>\n<li>单词拼错  Component写成了Compontent</li>\n</ul>\n<h5 id=\"问题2\"><a href=\"#问题2\" class=\"headerlink\" title=\"问题2:\"></a>问题2:</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Warning: React.createElement: <span class=\"built_in\">type</span> should not be null, undefined, boolean, or number. It should be a string (<span class=\"keyword\">for</span> DOM elements) or a ReactClass (<span class=\"keyword\">for</span> composite components).</span><br><span class=\"line\"> Uncaught Invariant Violation: Element <span class=\"built_in\">type</span> is invalid: expected a string (<span class=\"keyword\">for</span> built-in components) or a class/<span class=\"keyword\">function</span> (<span class=\"keyword\">for</span> composite components) but got: undefined.</span><br></pre></td></tr></table></figure>\n<ul>\n<li>import { Foot } from ‘./foot.js’  改成了 import Foot from ‘./foot.js’</li>\n</ul>\n<h5 id=\"问题3\"><a href=\"#问题3\" class=\"headerlink\" title=\"问题3:\"></a>问题3:</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Failed to compile</span><br><span class=\"line\">./node_modules/antd/lib/button/style/index.less</span><br><span class=\"line\">Module build failed: </span><br><span class=\"line\"></span><br><span class=\"line\">// https://github.com/ant-design/ant-motion/issues/44  </span><br><span class=\"line\">.bezierEasingMixin();</span><br><span class=\"line\">^</span><br><span class=\"line\">Inline JavaScript is not enabled. Is it <span class=\"built_in\">set</span> <span class=\"keyword\">in</span> your options?</span><br><span class=\"line\">      <span class=\"keyword\">in</span> C:\\Users\\HP\\Desktop\\react-antD\\react-antd\\node_modules\\antd\\lib\\style\\color\\bezierEasing.less (line 110, column 0)</span><br><span class=\"line\">This error occurred during the build time and cannot be dismissed.</span><br></pre></td></tr></table></figure>\n<ul>\n<li>两种方式<ul>\n<li>1.yarn add less@^2.7.3   </li>\n<li>2.打开项目的package.json 找到dependencies下面的less 将其版本改为  “2.7.3”   然后 yarn install   </li>\n</ul>\n</li>\n</ul>\n","categories":["react"],"tags":["react"]},{"title":"移动端页面自适应解决方案—rem布局","url":"http://yoursite.com/2018/01/01/rem/","content":"<p>设计稿尺寸为750 * 1340。结合网易、淘宝移动端首页html元素上的动态font-size属性、设计稿尺寸、前端与设计之间协作流程一般分为下面两种：</p>\n<h3 id=\"一、网易做法：\"><a href=\"#一、网易做法：\" class=\"headerlink\" title=\"一、网易做法：\"></a>一、网易做法：</h3><h4 id=\"引入：页面开头处引入下面这段代码，用于动态计算font-size\"><a href=\"#引入：页面开头处引入下面这段代码，用于动态计算font-size\" class=\"headerlink\" title=\"引入：页面开头处引入下面这段代码，用于动态计算font-size\"></a>引入：页面开头处引入下面这段代码，用于动态计算font-size</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">doc, win</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> docEl = doc.documentElement,</span><br><span class=\"line\">        isIOS = navigator.userAgent.match(<span class=\"regexp\">/\\(i[^;]+;( U;)? CPU.+Mac OS X/</span>),</span><br><span class=\"line\">        dpr = isIOS ? <span class=\"built_in\">Math</span>.min(win.devicePixelRatio, <span class=\"number\">3</span>) : <span class=\"number\">1</span>,</span><br><span class=\"line\">        dpr = <span class=\"built_in\">window</span>.top === <span class=\"built_in\">window</span>.self ? dpr : <span class=\"number\">1</span>, <span class=\"comment\">//被iframe引用时，禁止缩放</span></span><br><span class=\"line\">        dpr = <span class=\"number\">1</span>,</span><br><span class=\"line\">        scale = <span class=\"number\">1</span> / dpr,</span><br><span class=\"line\">        resizeEvt = <span class=\"string\">'orientationchange'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span> ? <span class=\"string\">'orientationchange'</span> : <span class=\"string\">'resize'</span>;</span><br><span class=\"line\">    docEl.dataset.dpr = dpr;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> metaEl = doc.createElement(<span class=\"string\">'meta'</span>);</span><br><span class=\"line\">    metaEl.name = <span class=\"string\">'viewport'</span>;</span><br><span class=\"line\">    metaEl.content = <span class=\"string\">'initial-scale='</span> + scale + <span class=\"string\">',maximum-scale='</span> + scale + <span class=\"string\">', minimum-scale='</span> + scale;</span><br><span class=\"line\">    docEl.firstElementChild.appendChild(metaEl);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> recalc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> width = docEl.clientWidth;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width / dpr &gt; <span class=\"number\">750</span>) &#123;</span><br><span class=\"line\">            width = <span class=\"number\">750</span> * dpr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 乘以100，px : rem = 100 : 1</span></span><br><span class=\"line\">        docEl.style.fontSize = <span class=\"number\">100</span> * (width / <span class=\"number\">750</span>) + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    recalc()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!doc.addEventListener) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    win.addEventListener(resizeEvt, recalc, <span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">document</span>, <span class=\"built_in\">window</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用：\"><a href=\"#使用：\" class=\"headerlink\" title=\"使用：\"></a>使用：</h4><h5 id=\"未引入前：\"><a href=\"#未引入前：\" class=\"headerlink\" title=\"未引入前：\"></a>未引入前：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"引入后：除以100并将px换成rem：\"><a href=\"#引入后：除以100并将px换成rem：\" class=\"headerlink\" title=\"引入后：除以100并将px换成rem：\"></a>引入后：除以100并将px换成rem：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">7.5rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">6.4rem</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"二、淘宝做法：\"><a href=\"#二、淘宝做法：\" class=\"headerlink\" title=\"二、淘宝做法：\"></a>二、淘宝做法：</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">win, lib</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> doc = win.document;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> docEl = doc.documentElement;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> metaEl = doc.querySelector(<span class=\"string\">'meta[name=\"viewport\"]'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> flexibleEl = doc.querySelector(<span class=\"string\">'meta[name=\"flexible\"]'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dpr = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> scale = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> tid;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> flexible = lib.flexible || (lib.flexible = &#123;&#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (metaEl) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> match = metaEl.getAttribute(<span class=\"string\">'content'</span>).match(<span class=\"regexp\">/initial\\-scale=([\\d\\.]+)/</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (match) &#123;</span><br><span class=\"line\">            scale = <span class=\"built_in\">parseFloat</span>(match[<span class=\"number\">1</span>]);</span><br><span class=\"line\">            dpr = <span class=\"built_in\">parseInt</span>(<span class=\"number\">1</span> / scale);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (flexibleEl) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> content = flexibleEl.getAttribute(<span class=\"string\">'content'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (content) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> initialDpr = content.match(<span class=\"regexp\">/initial\\-dpr=([\\d\\.]+)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> maximumDpr = content.match(<span class=\"regexp\">/maximum\\-dpr=([\\d\\.]+)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (initialDpr) &#123;</span><br><span class=\"line\">                dpr = <span class=\"built_in\">parseFloat</span>(initialDpr[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                scale = <span class=\"built_in\">parseFloat</span>((<span class=\"number\">1</span> / dpr).toFixed(<span class=\"number\">2</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (maximumDpr) &#123;</span><br><span class=\"line\">                dpr = <span class=\"built_in\">parseFloat</span>(maximumDpr[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                scale = <span class=\"built_in\">parseFloat</span>((<span class=\"number\">1</span> / dpr).toFixed(<span class=\"number\">2</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!dpr &amp;&amp; !scale) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isAndroid = win.navigator.appVersion.match(<span class=\"regexp\">/android/gi</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isIPhone = win.navigator.appVersion.match(<span class=\"regexp\">/iphone/gi</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> devicePixelRatio = win.devicePixelRatio;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isIPhone) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (devicePixelRatio &gt;= <span class=\"number\">3</span> &amp;&amp; (!dpr || dpr &gt;= <span class=\"number\">3</span>)) &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">3</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (devicePixelRatio &gt;= <span class=\"number\">2</span> &amp;&amp; (!dpr || dpr &gt;= <span class=\"number\">2</span>)) &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">2</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 其他设备下，仍旧使用1倍的方案</span></span><br><span class=\"line\">            dpr = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        scale = <span class=\"number\">1</span> / dpr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    docEl.setAttribute(<span class=\"string\">'data-dpr'</span>, dpr);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!metaEl) &#123;</span><br><span class=\"line\">        metaEl = doc.createElement(<span class=\"string\">'meta'</span>);</span><br><span class=\"line\">        metaEl.setAttribute(<span class=\"string\">'name'</span>, <span class=\"string\">'viewport'</span>);</span><br><span class=\"line\">        metaEl.setAttribute(<span class=\"string\">'content'</span>, <span class=\"string\">'initial-scale='</span> + scale + <span class=\"string\">', maximum-scale='</span> + scale + <span class=\"string\">', minimum-scale='</span> + scale + <span class=\"string\">', user-scalable=no'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (docEl.firstElementChild) &#123;</span><br><span class=\"line\">            docEl.firstElementChild.appendChild(metaEl);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> wrap = doc.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">            wrap.appendChild(metaEl);</span><br><span class=\"line\">            doc.write(wrap.innerHTML);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">refreshRem</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> width = docEl.getBoundingClientRect().width;</span><br><span class=\"line\">        <span class=\"comment\">// 适配平板</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width / dpr &gt; <span class=\"number\">540</span>) &#123;</span><br><span class=\"line\">            width = <span class=\"number\">540</span> * dpr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> rem = width / <span class=\"number\">10</span>;</span><br><span class=\"line\">        docEl.style.fontSize = rem + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        flexible.rem = win.rem = rem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    win.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        clearTimeout(tid);</span><br><span class=\"line\">        tid = setTimeout(refreshRem, <span class=\"number\">300</span>);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    win.addEventListener(<span class=\"string\">'pageshow'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.persisted) &#123;</span><br><span class=\"line\">            clearTimeout(tid);</span><br><span class=\"line\">            tid = setTimeout(refreshRem, <span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (doc.readyState === <span class=\"string\">'complete'</span>) &#123;</span><br><span class=\"line\">        doc.body.style.fontSize = <span class=\"number\">12</span> * dpr + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        doc.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">            doc.body.style.fontSize = <span class=\"number\">12</span> * dpr + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    refreshRem();</span><br><span class=\"line\">    flexible.dpr = win.dpr = dpr;</span><br><span class=\"line\">    flexible.refreshRem = refreshRem;</span><br><span class=\"line\">    flexible.rem2px = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> val = <span class=\"built_in\">parseFloat</span>(d) * <span class=\"keyword\">this</span>.rem;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'string'</span> &amp;&amp; d.match(<span class=\"regexp\">/rem$/</span>)) &#123;</span><br><span class=\"line\">            val += <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    flexible.px2rem = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> val = <span class=\"built_in\">parseFloat</span>(d) / <span class=\"keyword\">this</span>.rem;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'string'</span> &amp;&amp; d.match(<span class=\"regexp\">/px$/</span>)) &#123;</span><br><span class=\"line\">            val += <span class=\"string\">'rem'</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>, <span class=\"built_in\">window</span>[<span class=\"string\">'lib'</span>] || (<span class=\"built_in\">window</span>[<span class=\"string\">'lib'</span>] = &#123;&#125;));</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用：-1\"><a href=\"#使用：-1\" class=\"headerlink\" title=\"使用：\"></a>使用：</h4><h5 id=\"未引入前：-1\"><a href=\"#未引入前：-1\" class=\"headerlink\" title=\"未引入前：\"></a>未引入前：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"引入后：除以100并将px换成rem：-1\"><a href=\"#引入后：除以100并将px换成rem：-1\" class=\"headerlink\" title=\"引入后：除以100并将px换成rem：\"></a>引入后：除以100并将px换成rem：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@font-size-base: 75;</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750rem</span>/@font-size-base;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640rem</span>/@font-size-base;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["移动端"],"tags":["移动端","rem"]},{"title":"about","url":"http://yoursite.com/about/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://yoursite.com/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://yoursite.com/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://yoursite.com/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://yoursite.com/tag/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://yoursite.com/category/index.html","content":"","categories":[],"tags":[]}]