[{"title":"移动端页面自适应解决方案—rem布局","url":"http://yoursite.com/2018/07/16/rem/","content":"<p>设计稿尺寸为750 * 1340。结合网易、淘宝移动端首页html元素上的动态font-size属性、设计稿尺寸、前端与设计之间协作流程一般分为下面两种：</p>\n<h3 id=\"一、网易做法：\"><a href=\"#一、网易做法：\" class=\"headerlink\" title=\"一、网易做法：\"></a>一、网易做法：</h3><h4 id=\"引入：页面开头处引入下面这段代码，用于动态计算font-size\"><a href=\"#引入：页面开头处引入下面这段代码，用于动态计算font-size\" class=\"headerlink\" title=\"引入：页面开头处引入下面这段代码，用于动态计算font-size\"></a>引入：页面开头处引入下面这段代码，用于动态计算font-size</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">doc, win</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> docEl = doc.documentElement,</span><br><span class=\"line\">        isIOS = navigator.userAgent.match(<span class=\"regexp\">/\\(i[^;]+;( U;)? CPU.+Mac OS X/</span>),</span><br><span class=\"line\">        dpr = isIOS ? <span class=\"built_in\">Math</span>.min(win.devicePixelRatio, <span class=\"number\">3</span>) : <span class=\"number\">1</span>,</span><br><span class=\"line\">        dpr = <span class=\"built_in\">window</span>.top === <span class=\"built_in\">window</span>.self ? dpr : <span class=\"number\">1</span>, <span class=\"comment\">//被iframe引用时，禁止缩放</span></span><br><span class=\"line\">        dpr = <span class=\"number\">1</span>,</span><br><span class=\"line\">        scale = <span class=\"number\">1</span> / dpr,</span><br><span class=\"line\">        resizeEvt = <span class=\"string\">'orientationchange'</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span> ? <span class=\"string\">'orientationchange'</span> : <span class=\"string\">'resize'</span>;</span><br><span class=\"line\">    docEl.dataset.dpr = dpr;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> metaEl = doc.createElement(<span class=\"string\">'meta'</span>);</span><br><span class=\"line\">    metaEl.name = <span class=\"string\">'viewport'</span>;</span><br><span class=\"line\">    metaEl.content = <span class=\"string\">'initial-scale='</span> + scale + <span class=\"string\">',maximum-scale='</span> + scale + <span class=\"string\">', minimum-scale='</span> + scale;</span><br><span class=\"line\">    docEl.firstElementChild.appendChild(metaEl);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> recalc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> width = docEl.clientWidth;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width / dpr &gt; <span class=\"number\">750</span>) &#123;</span><br><span class=\"line\">            width = <span class=\"number\">750</span> * dpr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 乘以100，px : rem = 100 : 1</span></span><br><span class=\"line\">        docEl.style.fontSize = <span class=\"number\">100</span> * (width / <span class=\"number\">750</span>) + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    recalc()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!doc.addEventListener) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    win.addEventListener(resizeEvt, recalc, <span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">document</span>, <span class=\"built_in\">window</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用：\"><a href=\"#使用：\" class=\"headerlink\" title=\"使用：\"></a>使用：</h4><h5 id=\"未引入前：\"><a href=\"#未引入前：\" class=\"headerlink\" title=\"未引入前：\"></a>未引入前：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"引入后：除以100并将px换成rem：\"><a href=\"#引入后：除以100并将px换成rem：\" class=\"headerlink\" title=\"引入后：除以100并将px换成rem：\"></a>引入后：除以100并将px换成rem：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">7.5rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">6.4rem</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"二、淘宝做法：\"><a href=\"#二、淘宝做法：\" class=\"headerlink\" title=\"二、淘宝做法：\"></a>二、淘宝做法：</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">win, lib</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> doc = win.document;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> docEl = doc.documentElement;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> metaEl = doc.querySelector(<span class=\"string\">'meta[name=\"viewport\"]'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> flexibleEl = doc.querySelector(<span class=\"string\">'meta[name=\"flexible\"]'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dpr = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> scale = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> tid;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> flexible = lib.flexible || (lib.flexible = &#123;&#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (metaEl) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> match = metaEl.getAttribute(<span class=\"string\">'content'</span>).match(<span class=\"regexp\">/initial\\-scale=([\\d\\.]+)/</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (match) &#123;</span><br><span class=\"line\">            scale = <span class=\"built_in\">parseFloat</span>(match[<span class=\"number\">1</span>]);</span><br><span class=\"line\">            dpr = <span class=\"built_in\">parseInt</span>(<span class=\"number\">1</span> / scale);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (flexibleEl) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> content = flexibleEl.getAttribute(<span class=\"string\">'content'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (content) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> initialDpr = content.match(<span class=\"regexp\">/initial\\-dpr=([\\d\\.]+)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> maximumDpr = content.match(<span class=\"regexp\">/maximum\\-dpr=([\\d\\.]+)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (initialDpr) &#123;</span><br><span class=\"line\">                dpr = <span class=\"built_in\">parseFloat</span>(initialDpr[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                scale = <span class=\"built_in\">parseFloat</span>((<span class=\"number\">1</span> / dpr).toFixed(<span class=\"number\">2</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (maximumDpr) &#123;</span><br><span class=\"line\">                dpr = <span class=\"built_in\">parseFloat</span>(maximumDpr[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                scale = <span class=\"built_in\">parseFloat</span>((<span class=\"number\">1</span> / dpr).toFixed(<span class=\"number\">2</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!dpr &amp;&amp; !scale) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isAndroid = win.navigator.appVersion.match(<span class=\"regexp\">/android/gi</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isIPhone = win.navigator.appVersion.match(<span class=\"regexp\">/iphone/gi</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> devicePixelRatio = win.devicePixelRatio;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isIPhone) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (devicePixelRatio &gt;= <span class=\"number\">3</span> &amp;&amp; (!dpr || dpr &gt;= <span class=\"number\">3</span>)) &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">3</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (devicePixelRatio &gt;= <span class=\"number\">2</span> &amp;&amp; (!dpr || dpr &gt;= <span class=\"number\">2</span>)) &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">2</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                dpr = <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 其他设备下，仍旧使用1倍的方案</span></span><br><span class=\"line\">            dpr = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        scale = <span class=\"number\">1</span> / dpr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    docEl.setAttribute(<span class=\"string\">'data-dpr'</span>, dpr);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!metaEl) &#123;</span><br><span class=\"line\">        metaEl = doc.createElement(<span class=\"string\">'meta'</span>);</span><br><span class=\"line\">        metaEl.setAttribute(<span class=\"string\">'name'</span>, <span class=\"string\">'viewport'</span>);</span><br><span class=\"line\">        metaEl.setAttribute(<span class=\"string\">'content'</span>, <span class=\"string\">'initial-scale='</span> + scale + <span class=\"string\">', maximum-scale='</span> + scale + <span class=\"string\">', minimum-scale='</span> + scale + <span class=\"string\">', user-scalable=no'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (docEl.firstElementChild) &#123;</span><br><span class=\"line\">            docEl.firstElementChild.appendChild(metaEl);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> wrap = doc.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">            wrap.appendChild(metaEl);</span><br><span class=\"line\">            doc.write(wrap.innerHTML);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">refreshRem</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> width = docEl.getBoundingClientRect().width;</span><br><span class=\"line\">        <span class=\"comment\">// 适配平板</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width / dpr &gt; <span class=\"number\">540</span>) &#123;</span><br><span class=\"line\">            width = <span class=\"number\">540</span> * dpr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> rem = width / <span class=\"number\">10</span>;</span><br><span class=\"line\">        docEl.style.fontSize = rem + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        flexible.rem = win.rem = rem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    win.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        clearTimeout(tid);</span><br><span class=\"line\">        tid = setTimeout(refreshRem, <span class=\"number\">300</span>);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    win.addEventListener(<span class=\"string\">'pageshow'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.persisted) &#123;</span><br><span class=\"line\">            clearTimeout(tid);</span><br><span class=\"line\">            tid = setTimeout(refreshRem, <span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (doc.readyState === <span class=\"string\">'complete'</span>) &#123;</span><br><span class=\"line\">        doc.body.style.fontSize = <span class=\"number\">12</span> * dpr + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        doc.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">            doc.body.style.fontSize = <span class=\"number\">12</span> * dpr + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        &#125;, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    refreshRem();</span><br><span class=\"line\">    flexible.dpr = win.dpr = dpr;</span><br><span class=\"line\">    flexible.refreshRem = refreshRem;</span><br><span class=\"line\">    flexible.rem2px = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> val = <span class=\"built_in\">parseFloat</span>(d) * <span class=\"keyword\">this</span>.rem;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'string'</span> &amp;&amp; d.match(<span class=\"regexp\">/rem$/</span>)) &#123;</span><br><span class=\"line\">            val += <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    flexible.px2rem = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> val = <span class=\"built_in\">parseFloat</span>(d) / <span class=\"keyword\">this</span>.rem;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'string'</span> &amp;&amp; d.match(<span class=\"regexp\">/px$/</span>)) &#123;</span><br><span class=\"line\">            val += <span class=\"string\">'rem'</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>, <span class=\"built_in\">window</span>[<span class=\"string\">'lib'</span>] || (<span class=\"built_in\">window</span>[<span class=\"string\">'lib'</span>] = &#123;&#125;));</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用：-1\"><a href=\"#使用：-1\" class=\"headerlink\" title=\"使用：\"></a>使用：</h4><h5 id=\"未引入前：-1\"><a href=\"#未引入前：-1\" class=\"headerlink\" title=\"未引入前：\"></a>未引入前：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"引入后：除以100并将px换成rem：-1\"><a href=\"#引入后：除以100并将px换成rem：-1\" class=\"headerlink\" title=\"引入后：除以100并将px换成rem：\"></a>引入后：除以100并将px换成rem：</h5><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@font-size-base: 75;</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">750rem</span>/@font-size-base;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">640rem</span>/@font-size-base;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":[],"tags":[]},{"title":"H5常见问题及解决方案","url":"http://yoursite.com/2018/06/22/h5/","content":"<p>本文主要收集一些移动web开发中常见的问题和解决办法，在日常的工作中遇到新的问题会不定时更新到文章中。</p>\n<h3 id=\"1、Meta基础知识：\"><a href=\"#1、Meta基础知识：\" class=\"headerlink\" title=\"1、Meta基础知识：\"></a>1、Meta基础知识：</h3><h4 id=\"空白页基本meta标签\"><a href=\"#空白页基本meta标签\" class=\"headerlink\" title=\"空白页基本meta标签\"></a>空白页基本meta标签</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 设置缩放 --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\"</span> /&gt;   </span><br><span class=\"line\">// user-scalable    是否允许手动缩放  </span><br><span class=\"line\">&lt;!-- 可隐藏地址栏，仅针对IOS的Safari（注：IOS7.0版本以后，safari上已看不到效果） --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"apple-mobile-web-app-capable\"</span> content=<span class=\"string\">\"yes\"</span> /&gt;  </span><br><span class=\"line\">&lt;!-- 仅针对IOS的Safari顶端状态条的样式（可选default/black/black-translucent ） --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"apple-mobile-web-app-status-bar-style\"</span> content=<span class=\"string\">\"black\"</span> /&gt;  </span><br><span class=\"line\">&lt;!-- IOS中禁用将数字识别为电话号码/忽略Android平台中对邮箱地址的识别 --&gt;  </span><br><span class=\"line\">&lt;meta name=<span class=\"string\">\"format-detection\"</span>content=<span class=\"string\">\"telephone=no, email=no\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"页面缓存设置\"><a href=\"#页面缓存设置\" class=\"headerlink\" title=\"页面缓存设置\"></a>页面缓存设置</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 清除缓存 --&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"pragma\"</span> content=<span class=\"string\">\"no-cache\"</span>&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"cache-control\"</span> content=<span class=\"string\">\"no-cache\"</span>&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">\"expires\"</span> content=<span class=\"string\">\"0\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、CSS部分：\"><a href=\"#2、CSS部分：\" class=\"headerlink\" title=\"2、CSS部分：\"></a>2、CSS部分：</h3><ul>\n<li>去除点击元素产生背景或边框</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* &#123; <span class=\"attribute\">-webkit-tap-highlight-color</span>: <span class=\"built_in\">rgba</span>(0,0,0,0); &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>禁止长按链接与图片弹出菜单</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>,<span class=\"selector-tag\">img</span>&#123;<span class=\"attribute\">-webkit-touch-callout</span>:none;&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>禁止用户选中图片或文字</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;<span class=\"attribute\">-webkit-user-select</span>: none&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>去除表单元素默认样式</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">input</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-appearance</span>:none;</span><br><span class=\"line\">  <span class=\"attribute\">outline</span>:none;</span><br><span class=\"line\">&#125;&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>超过一定宽度省略号…显示</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*指定字符串的宽度*/</span></span><br><span class=\"line\"><span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:300px</span>;   </span><br><span class=\"line\"><span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">hidden</span>;  </span><br><span class=\"line\"><span class=\"comment\">/* 当字符串超过规定长度，显示省略符*/</span> </span><br><span class=\"line\"><span class=\"selector-tag\">text-overflow</span><span class=\"selector-pseudo\">:ellipsis</span>;  </span><br><span class=\"line\"><span class=\"selector-tag\">white-space</span>: <span class=\"selector-tag\">nowrap</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、JS部分：\"><a href=\"#3、JS部分：\" class=\"headerlink\" title=\"3、JS部分：\"></a>3、JS部分：</h3><ul>\n<li>OS中不支持”2000-01-01 00:00:00”格式,返回NaN</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> time = <span class=\"string\">\"2000-01-01 00:00:00\"</span></span><br><span class=\"line\">time = time.replace(<span class=\"regexp\">/\\-/g</span>, <span class=\"string\">\"/\"</span>);<span class=\"comment\">//将时间格式的'-'转成'/'形式，兼容iOS</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>移动端click屏幕产生200-300ms的延时响应</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">引入js ： fastclick.min.js</span><br><span class=\"line\">引入   </span><br><span class=\"line\"> (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> attachFastClick = Origami.fastclick;</span><br><span class=\"line\">    attachFastClick(<span class=\"built_in\">document</span>.body);</span><br><span class=\"line\">  &#125;)()</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":[]},{"title":"about","url":"http://yoursite.com/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://yoursite.com/category/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://yoursite.com/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://yoursite.com/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://yoursite.com/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://yoursite.com/tag/index.html","content":"","categories":[],"tags":[]}]